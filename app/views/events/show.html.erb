<!--- BUTTONS ON TOP --->

<div class="button-container" style="margin-top: 100px;">
  <div class="butn green-border">
    <p class="x-small green-text" style="margin-bottom: 4px;">Going</p>
    <h2 class="green-text" id="going-count">
      <%= @going_count %>
    </h2>
  </div>

  <div class="butn red-border">
    <p class="x-small red-text" style="margin-bottom: 4px;">Missing</p>
    <h2 class="red-text" id="missing-count">
      <%= @missing_count %>
    </h2>
  </div>

  <!--- ADD JOIN LOGIC HERE --->

  <div class="butn join-red" id="join-button" style="margin-bottom: 4px; display: flex; justify-content: center; align-items: center; padding: 0;" data-cancel_url="<%= event_user_path(@event_user || 0) %>" data-join_url="<%= event_event_users_path(@event) %>" data-joined="<%= @event_user.present? %>">
<!--     <h2 class="white-text">  </h2>
 -->
  <!--    <section> -->
     <!--  <div class="logo-comtainer" style="position: sticky; top: 0; left: 0; display: flex; justify-content: center; align-items: center; width: 100%; height: 100%;"> -->
  <!--   <div class="logo-container" style="height: 80%; width: 80%;"> -->

      <div class="u-container" style=" position: relative; top: 0;">
              <svg
                id="u"
                width="28.5px"
                height="50px"
                viewBox="0 0 180 309"
                fill="none"
                xmlns="http://www.w3.org/2000/svg">
                <path
                  class = "u"
                  d="M6 6V219.025C6 230.047 8.17087 240.96 12.3887 251.143C16.6065 261.326 22.7886 270.578 30.5821 278.371C38.3756 286.165 47.6278 292.347 57.8105 296.565C67.9931 300.783 78.9068 302.953 89.9285 302.953C100.95 302.953 111.864 300.783 122.047 296.565C132.229 292.347 141.481 286.165 149.275 278.371C157.068 270.578 163.251 261.326 167.468 251.143C171.686 240.96 173.857 230.047 173.857 219.025V6"
                  stroke="#FFF"
                  stroke-width="10"
                  stroke-miterlimit="10"
                  stroke-linecap="round"
                />
              </svg>
              <div class="plus-container" style="position: absolute; top: 3px; left: -13.3px;">
                <svg
                  id = "plus"
                  width="28.5px"
                  height="28.5px"
                  viewBox="0 0 183 183"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg">
                  <path
                  class = "plus"
                    d="M6 91.459L176.918 91.459M92.99 6L92.99 176.918"
                    stroke="#FFF"
                    stroke-width="7"
                    stroke-miterlimit="10"
                    stroke-linecap="round"
                  />
                </svg>
              </div>
            </div>
          </div> <!-- butn join red -->
      <!--   </section> -->


      </div>
    </div>

  </div> <!-- Button Container -->




















<!--- IMAGE --->

<div class="mt-40">
  <img class="image" src="../assets/beer" alt=""  />
</div>

<!--- CONTENT --->

<div class="event-info">
  <h2 class="mb-20">Beer Pong Ding Dong</h2>

  <div class="flex">
    <%=  image_tag "clock.png", class: "clock" %>
    <div class="grow">
      <p class="bold">Monday, February 17</p>
      <p class="small">at 2:10 PM</p>
    </div>
    <!-- <div>
      <p class="x-small red-text" style="padding-top: 15px;">Check Calandar</p>
    </div> -->
  </div>

    <div class="flex justify-between mb-40">
      <%=  image_tag "map.png", class: "map" %>
    <div class="grow">
      <p class="bold">Oslo Mekaniske Verksted</p>
      <p class="small">TÃ¸yenbekken 34, 0188 Oslo</p>
    </div>
<!--     <div>
      <p class="x-small red-text" style="padding-top: 15px;">Get Directon</p>
    </div> -->
  </div>

  <!--- UPDATE AND DELETE --->
  <% if current_user == @event.creator %>
  <div class="flex mb-35">
    <p class="button-black small"> <%= link_to "UPDATE", edit_event_path(params[:id]) %> </p>
    <p class="button-black small"><%= link_to "CANCEL", event_path, method: :delete %></p>
  </div>
  <% end %>

  <!--- GOING --->

  <div class="event-border">
    <div>
      <p class="bold">Going</p>
    </div>
    <div class="flex">
      <img class="avatar marginr-4" src="../assets/beer" alt=""  />
      <img class="avatar marginr-4" src="../assets/beer" alt=""  />
    </div>
  </div>

  <!--- DESCRIPTION --->

  <div class="flex justify-between event-border">
    <div>
      <p class="bold">Event Manager</p>
      <p class="small">Maria Lopez Gonzales</p>
    </div>
    <img class="avatar" src="../assets/beer" alt=""  />
  </div>

  <div>
    <p>Lorem ipsum dolor sit sroa rai amet, cons ecsa aatatetur adipiscing elit, sed do eiusm sateatod tempor sagtat incididunt ut labore et dolosatre mana aliqua. Ut enim ad minim veniam, quis </p>
  </div>

  <!--- CANCEL --->

<!--   <div class="mt-40">
    <p class="button-cancel">Cancel</p>
  </div> -->

  <!--- FACEBOOK WALL --->

  <div class="flex justify-between mt-35">
    <p class="bold red-text mb-20" style="font-weight: lighter;">Questions</p>
  </div>

  <div class="mb-40">
    <div>
      <div id="comments">
      <%= render @comments %>
      </div>
      <%= form_with model: [@event, Comment.new] do |form| %>
        <div class="form-group" style="display: flex; flex-direction: row;">
        <!--      <%= form.label :body %> -->
          <%= form.text_field :body, :placeholder => "Add your comment" %>
        <!--        <%= form.submit :class => "input_comment" %> -->
        </div>
      <% end %>
    </div>
  </div>
</div>


<% content_for :after_js do %>
<script>
  function scrollLastMessageIntoView() {
    const messages = document.querySelectorAll('.comment');
    const lastMessage = messages[messages.length - 1]
    if (lastMessage !== undefined) {
      lastMessage.scrollIntoView();
    }
  }

  App["event_show_<%= @event.id %>"] = App.cable.subscriptions.create(
    { channel: 'CommentChannel', event_id: <%= @event.id %> },
    {
      received: (data) => {
        const messagesContainer = document.querySelector('#comments');
        messagesContainer.insertAdjacentHTML('beforeend', data.message_partial);

        if (data.current_user_id == <%= current_user.id %>) {
          scrollLastMessageIntoView();
        }
      }
    });
</script>

<script>

</script>

<% end %>

<%# simple_form_for [@event, @event_user] do |f| %>
    <%#= f.button :submit, 'SEND' %>
<%# end %>
